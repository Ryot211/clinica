<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="primefaces">

<ui:composition template="/templates/layout.xhtml">

    <ui:define name="titulo">Página de Doctores ️</ui:define>

    <ui:define name="contenido">
        <h:form id="formMain" prependId="false">

            <p:panelGrid columns="1" layout="grid">
                <p:commandButton icon="pi pi-plus" ajax="false" value="Nuevo"
                                 actionListener="#{doctorMB.nuevo(null, '/procesos/paciente.xhtml',false)}"/>
            </p:panelGrid>
            <p:dataTable rows="5" paginator="true" paginatorPosition="bottom" id="pacientes" widgetVar="pacientes"
                         value="#{doctorMB.doctores}" var="item">
                <f:facet name="header">
                    <h2>Pacientess</h2>
                    <p:commandButton value="Filtrar Activos" process="@this" update="pacientes"
                                     actionListener="#{doctorMB.loadDoctores('ACTIVO')}" style="width:150px;"/>
                    <p:spacer width="10"/>
                    <p:commandButton value="Filtrar Inactivos" process="@this" update="pacientes"
                                     actionListener="#{doctorMB.loadDoctores('INACTIVO')}" style="width:150px;"/>
                    <p:spacer width="10"/>
                    <p:commandButton value="Imprimir ACTIVO" icon="pi pi-print"
                                     actionListener="#{doctorMB.imprimir('ACTIVO')}" style="width:200px;"/>
                    <p:spacer width="10"/>
                    <p:commandButton value="Imprimir INACTIVOS" icon="pi pi-print"
                                     actionListener="#{doctorMB.imprimir('INACTIVO')}" style="width:200px;"/>
                </f:facet>
                <p:column width="50" headerText="Identificación" filterBy="#{item.identificacion}"
                          filterMatchMode="contains">
                    <p:outputLabel value="#{item.identificacion}"/>
                </p:column>
                <p:column width="50" headerText="Nombre" filterBy="#{item.nombre}" filterMatchMode="contains">
                    <p:outputLabel value="#{item.nombre}"/>
                </p:column>
                <p:column width="50" headerText="Apellido" filterBy="#{item.apellido}" filterMatchMode="contains">
                    <p:outputLabel value="#{item.apellido}"/>
                </p:column>
                <p:column width="50" headerText="Especialidad" filterBy="#{item.especialidad}" filterMatchMode="contains">
                    <p:outputLabel value="#{item.especialidad}"/>
                </p:column>
                <p:column width="25" headerText="Edad" filterBy="#{item.edad}" filterMatchMode="exact">
                    <p:outputLabel value="#{item.edad}"/>
                </p:column>
                <p:column width="100" headerText="Correo" filterBy="#{item.correo}" filterMatchMode="contains">
                    <p:outputLabel value="#{item.correo}"/>
                </p:column>
                <p:column width="100" headerText="Telefono" filterBy="#{item.telefono}" filterMatchMode="contains">
                    <p:outputLabel value="#{item.telefono}"/>
                </p:column>

                <p:column width="25" headerText="Estado">
                    <p:outputLabel value="#{item.estado}"/>
                </p:column>

                <p:column headerText="***" width="25" style="text-align:center;">

                    <p:commandLink process="@this"
                                   actionListener="#{doctorMB.nuevo(item, '/procesos/doctor.xhtml',true)}">
                        <i class="pi pi-eye" style="color: purple; font-size: 1rem; margin-right: 5px;"></i>
                    </p:commandLink>
                    <h:panelGroup rendered="#{item.estado eq 'ACTIVO'}">
                        <p:commandLink process="@this"
                                       actionListener="#{doctorMB.nuevo(item, '/procesos/doctor.xhtml',false)}">
                            <i class="pi pi-file-edit" style="font-size: 1rem;margin-right: 5px;"></i>
                        </p:commandLink>

                        <p:commandLink>
                            <i class="pi pi-trash" style="color: red; font-size: 1rem"></i>
                        </p:commandLink>
                    </h:panelGroup>
                </p:column>

            </p:dataTable>
        </h:form>
    </ui:define>

</ui:composition>
</html>
